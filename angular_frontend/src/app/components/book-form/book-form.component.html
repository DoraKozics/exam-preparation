<div class="container my-4">
  <h2 class="text-center my-3">New Book</h2>
  <form [formGroup]="bookForm"
        (ngSubmit)="onSubmit()"
        class="form-control purple-border">
    <div class="m-2">
      <label class="form-label"
             for="title">
        Title:
      </label>
      <input type="text"
             class="form-control"
             id="title"
             formControlName="title"
             placeholder="Title"
             [ngClass]="{'is-invalid' : (bookForm.get('title')?.invalid && bookForm.get('title')?.touched)
                                          || bookForm.get('title')?.errors?.['serverError']}">
      <small *ngIf="bookForm.get('title')?.invalid
             && bookForm.get('title')?.touched
             && !bookForm.get('title')?.errors?.['serverError']"
             class="text-danger">
        Please provide the title of the book! (maximum of 300 characters)
      </small>
      <small *ngIf="bookForm.get('title')?.errors?.['serverError']"
             class="text-danger">
        {{bookForm.get('title')?.errors?.['serverError']}}
      </small>
    </div>
    <div class="m-2">
      <label class="form-label"
             for="author">
        Author:
      </label>
      <input type="text"
             class="form-control"
             id="author"
             formControlName="author"
             placeholder="Author"
             [ngClass]="{'is-invalid' : (bookForm.get('author')?.invalid && bookForm.get('author')?.touched)
                                          || bookForm.get('author')?.errors?.['serverError']}">
      <small *ngIf="bookForm.get('author')?.invalid
             && bookForm.get('author')?.touched
             && !bookForm.get('author')?.errors?.['serverError']"
             class="text-danger">
        Please provide the author of the book! (at least 2 and maximum of 80 characters)
      </small>
      <small *ngIf="bookForm.get('author')?.errors?.['serverError']"
             class="text-danger">
        {{bookForm.get('author')?.errors?.['serverError']}}
      </small>
    </div>
    <div class="m-2">
      <label class="form-label"
             for="year">
        Publishing Year:
      </label>
      <input type="number"
             class="form-control"
             id="year"
             formControlName="year"
             [ngClass]="{'is-invalid': (bookForm.get('year')?.invalid && bookForm.get('year')?.touched)
                                        || bookForm.get('year')?.errors?.['serverError']}">
      <small *ngIf="bookForm.get('year')?.invalid
             && bookForm.get('year')?.touched
             && !bookForm.get('year')?.errors?.['serverError']"
             class="text-danger">
        Please provide a year! (between 1000 and 2024)
      </small>
      <small *ngIf="bookForm.get('year')?.errors?.['serverError']"
             class="text-danger">
        {{bookForm.get('year')?.errors?.['serverError']}}
      </small>
    </div>
    <div class="m-2 my-3 form-group">
      <label
        class="form-label">
        Genres:
      </label>
      <div formArrayName="genres" *ngFor="let genre of genreOptions; let i = index">
        <label class="form-control-label">
          <input type="checkbox" [formControlName]="i" class="purple-box">
          {{ genre.displayName }}
        </label>
      </div>
    </div>
    <div class="m-2 my-3">
      <label class="form-label"
             for="language">
        Language:
      </label>
      <select
        class="form-control form-select mb-3"
        size="{{languageOptions.length + 1}}"
        name="language"
        id="language"
        formControlName="language"
        [ngClass]="{'is-invalid': bookForm.get('language')?.invalid && bookForm.get('language')?.touched}">
        <option value="" selected disabled>Choose the language of the book:</option>
        <option class="black" *ngFor="let language of languageOptions"
                value="{{language.name}}">{{language.displayName}}</option>
      </select>
      <small *ngIf="bookForm.get('language')?.invalid
             && bookForm.get('language')?.touched
             && !bookForm.get('language')?.errors?.['serverError']"
             class="text-danger">
        Please choose the language of the book!
      </small>
      <small *ngIf="bookForm.get('language')?.errors?.['serverError']"
             class="text-danger">
        {{bookForm.get('language')?.errors?.['serverError']}}
      </small>
    </div>
    <div class="m-2">
      <label class="form-label"
             for="coverUrl">
        Cover URL:
      </label>
      <input type="text"
             class="form-control"
             id="coverUrl"
             formControlName="coverUrl"
             placeholder="Cover URL">
    </div>
    <div class="m-2">
      <button type="submit"
              class="btn purple"
              [disabled]="bookForm.invalid">Save
      </button>
    </div>
  </form>
</div>
